# 定积分的区间再现公式

区间再现公式是定积分计算中非常强大的工具，特别适用于处理具有特定对称性的被积函数。

## 公式与几何意义

!!! example "例题 1"
    **(1)** 证明区间再现公式：
    
    $$
    \displaystyle\int_{a}^{b} f(x)\mathrm{d}x = \displaystyle\int_{a}^{b} f(a+b-x)\mathrm{d}x = \dfrac{1}{2}\displaystyle\int_{a}^{b} \left[f(x)+f(a+b-x)\right]\mathrm{d}x
    $$

    **(2)** 尝试从几何意义去理解区间再现公式，并推测为何 $\displaystyle\int_{a}^{b} [f(x)+f(a+b-x)]\mathrm{d}x$ 往往比 $\displaystyle\int_{a}^{b} f(x)\mathrm{d}x$ 和 $\displaystyle\int_{a}^{b} f(a+b-x)\mathrm{d}x$ 要更加好算；

    **(3)** 计算 $\displaystyle\int_{0}^{\frac{\pi}{2}} \dfrac{\sin x}{\sin x + \cos x}\mathrm{d}x$，验证你在 (2) 中的猜想。

!!! success "解"
    **(1) 证明：**
    
    作代换 $x \mapsto a+b-x$，则 $\mathrm{d}x = -\mathrm{d}(a+b-x)$。
    当 $x=a$ 时，新变量为 $b$；当 $x=b$ 时，新变量为 $a$。
    
    得到：
    
    $$
    \displaystyle\int_{a}^{b} f(x)\mathrm{d}x = \displaystyle\int_{b}^{a} f(a+b-x)(-\mathrm{d}x) = \displaystyle\int_{a}^{b} f(a+b-x)\mathrm{d}x
    $$
    
    进而有：
    
    $$
    \displaystyle\int_{a}^{b} f(x)\mathrm{d}x = \dfrac{1}{2}\left[ \displaystyle\int_{a}^{b} f(x)\mathrm{d}x + \displaystyle\int_{a}^{b} f(a+b-x)\mathrm{d}x \right] = \dfrac{1}{2}\displaystyle\int_{a}^{b} [f(x)+f(a+b-x)]\mathrm{d}x
    $$

    **(2) 几何意义：**
    
    由于函数 $f(x)$ 与 $f(a+b-x)$ 关于直线 $x=\dfrac{a+b}{2}$ 对称。
    
    $$
    \displaystyle\int_{a}^{b} f(x)\mathrm{d}x = \displaystyle\int_{a}^{b} \dfrac{f(x)+f(a+b-x)}{2}\mathrm{d}x
    $$
    
    几何上，这意味着原函数的积分值等于其与对称函数叠加后平均高度的积分。当 $f(x)$ 与 $f(a+b-x)$ 的和为一个常数或简单的函数时，积分计算将大大简化（如图形“互补”填平成矩形）。

    **(3) 计算验证：**
    
    $$
    \begin{aligned}
    \displaystyle\int_{0}^{\frac{\pi}{2}} \dfrac{\sin x}{\sin x + \cos x}\mathrm{d}x &= \displaystyle\int_{0}^{\frac{\pi}{4}} \left( \dfrac{\sin x}{\sin x + \cos x} + \dfrac{\cos x}{\sin x + \cos x} \right)\mathrm{d}x \\
    &= \displaystyle\int_{0}^{\frac{\pi}{4}} 1 \mathrm{d}x = \dfrac{\pi}{4}.
    \end{aligned}
    $$

!!! 一个常见的积分公式

    设 $f(x)$ 连续，则

    $$ \displaystyle\int_{0}^{\pi} x f(\sin x) \mathrm{d}x=\pi \displaystyle\int_{0}^{\frac{\pi}{2}} f(\sin x) \mathrm{d}x $$

    可简化计算。请利用区间再现公式证明本公式，并计算

    $$ \displaystyle\int_{0}^{\pi} x \sqrt{\sin^{2}x - \sin^{4}x} \mathrm{d}x 、 \displaystyle\int_{0}^{\pi} \dfrac{x \sin x}{1 + \cos^{2}x} \mathrm{d}x $$

---

## 基础应用

!!! example "例题 2"
    计算 $\displaystyle\int_{0}^{\frac{\pi}{2}} \dfrac{1}{1+\tan^{\alpha}x}\mathrm{d}x$ （$\alpha$ 为常数）

!!! success "解"
    令 $f(x) = \dfrac{1}{1+\tan^{\alpha}x}$。

    利用区间再现公式，$x \to \dfrac{\pi}{2}-x$，则 $\tan x \to \cot x = \dfrac{1}{\tan x}$。
    
    $$
    f\left(\dfrac{\pi}{2}-x\right) = \dfrac{1}{1+\cot^{\alpha}x} = \dfrac{1}{1+\dfrac{1}{\tan^{\alpha}x}} = \dfrac{\tan^{\alpha}x}{1+\tan^{\alpha}x}
    $$
    
    于是：
    
    $$
    \begin{aligned}
    I &= \displaystyle\int_{0}^{\frac{\pi}{2}} \dfrac{\mathrm{d}x}{1+\tan^{\alpha}x} \\
    &= \displaystyle\int_{0}^{\frac{\pi}{4}} \left( \dfrac{1}{1+\tan^{\alpha}x} + \dfrac{1}{1+\cot^{\alpha}x} \right)\mathrm{d}x \\
    &= \displaystyle\int_{0}^{\frac{\pi}{4}} \left( \dfrac{1}{1+\tan^{\alpha}x} + \dfrac{\tan^{\alpha}x}{1+\tan^{\alpha}x} \right)\mathrm{d}x \\
    &= \displaystyle\int_{0}^{\frac{\pi}{4}} 1 \mathrm{d}x = \dfrac{\pi}{4}.
    \end{aligned}
    $$

!!! question "类题"
    计算 $\displaystyle\int_{0}^{+\infty} \dfrac{1}{(1+x^2)(1+x^{\alpha})}\mathrm{d}x$

!!! success "解"
    事实上做变换 $x \mapsto \tan x$ 后跟例题 2 是一样的。

    这里我们使用倒代换 $x \mapsto \dfrac{1}{x}$：
    
    $$
    \begin{aligned}
    \displaystyle\int_{0}^{+\infty} \dfrac{\mathrm{d}x}{(1+x^2)(1+x^{\alpha})} &\xrightarrow{x \mapsto \frac{1}{x}} \displaystyle\int_{+\infty}^{0} \dfrac{x^{\alpha}}{(1+x^2)(1+x^{\alpha})} \left(-\dfrac{1}{x^2}\right)\mathrm{d}x \\
    &= \displaystyle\int_{0}^{+\infty} \dfrac{x^{\alpha}}{(1+x^2)(1+x^{\alpha})}\mathrm{d}x
    \end{aligned}
    $$
    
    原积分 $I$ 等于变换后的积分，两者相加：
    
    $$
    2I = \displaystyle\int_{0}^{+\infty} \dfrac{1+x^{\alpha}}{(1+x^2)(1+x^{\alpha})}\mathrm{d}x = \displaystyle\int_{0}^{+\infty} \dfrac{\mathrm{d}x}{1+x^2} = \dfrac{\pi}{2} \implies I = \dfrac{\pi}{4}.
    $$

---

## 进阶技巧与对称性

!!! example "例题 3"
    $\displaystyle\int_{-\frac{\pi}{2}}^{\frac{\pi}{2}} (\arctan e^x) \cdot \sin^2 x \mathrm{d}x$

!!! success "解"

    $$
    \begin{aligned}
    I &= \displaystyle\int_{-\frac{\pi}{2}}^{\frac{\pi}{2}} \arctan(e^x) \cdot \sin^2 x \mathrm{d}x \\
    &= \displaystyle\int_{0}^{\frac{\pi}{2}} [\arctan(e^x) + \arctan(e^{-x})] \sin^2 x \mathrm{d}x \\
    \end{aligned}
    $$
    
    利用公式 $\arctan u + \arctan \dfrac{1}{u} = \dfrac{\pi}{2} \quad (u>0)$：
    
    $$
    = \dfrac{\pi}{2} \displaystyle\int_{0}^{\frac{\pi}{2}} \sin^2 x \mathrm{d}x = \dfrac{\pi}{2} \cdot \dfrac{\pi}{4} = \dfrac{\pi^2}{8}.
    $$

!!! question "类题"
    $\displaystyle\int_{-\pi/2}^{\pi/2} \dfrac{\sin^4 x}{1+e^{-2x}}\mathrm{d}x$

!!! success "解"

    $$
    \begin{aligned}
    I &= \displaystyle\int_{0}^{\frac{\pi}{2}} \dfrac{\sin^4 x}{1+e^{-2x}}\mathrm{d}x \\
    &= \displaystyle\int_{0}^{\frac{\pi}{4}} \left( \dfrac{\sin^4 x}{1+e^{-2x}} + \dfrac{\sin^4 x}{1+e^{2x}} \right)\mathrm{d}x \quad \text{(此步有误，区间应为对称区间或利用代换技巧)}
    \end{aligned}
    $$
    
    注意到$\dfrac{1}{1+e^{-x}} + \dfrac{1}{1+e^{x}} = 1$。*
    
    $I = \displaystyle\int_{0}^{\pi/2} \sin^4 x \mathrm{d}x = \dfrac{3}{4}\cdot\dfrac{1}{2}\cdot\dfrac{\pi}{2} = \dfrac{3\pi}{16}$。

!!! example "例题 4"
    $\displaystyle\int_{-2}^{2} x \ln(1+e^x)\mathrm{d}x$

!!! success "解"

    $$
    \begin{aligned}
    I &= \displaystyle\int_{-2}^{2} x \ln(1+e^x)\mathrm{d}x \\
    &= \displaystyle\int_{0}^{2} [x \ln(1+e^x) - x \ln(1+e^{-x})]\mathrm{d}x \\
    &= \displaystyle\int_{0}^{2} [x \ln(1+e^x) - x (\ln(1+e^x) - x)]\mathrm{d}x \quad (\text{因 } \ln(1+e^{-x}) = \ln\dfrac{1+e^x}{e^x} = \ln(1+e^x)-x) \\
    &= \displaystyle\int_{0}^{2} x^2 \mathrm{d}x = \dfrac{8}{3}.
    \end{aligned}
    $$

!!! example "例题 5"

    $\displaystyle\int_{\frac{\pi}{6}}^{\frac{\pi}{3}} \dfrac{\cos^2 x}{x(\pi - 2x)}\mathrm{d}x$

!!! success "解"

    积分区间关于 $x = \dfrac{\frac{\pi}{6}+\frac{\pi}{3}}{2} = \dfrac{\pi}{4}$ 对称。

    令 $x \to \dfrac{\pi}{2}-x$，分母 $x(\pi-2x)$ 变为 $(\dfrac{\pi}{2}-x)(\pi - 2(\dfrac{\pi}{2}-x)) = (\dfrac{\pi}{2}-x)(2x) = x(\pi-2x)$，分母不变。
    
    $$
    \begin{aligned}
    I &= \displaystyle\int_{\frac{\pi}{6}}^{\frac{\pi}{4}} \left[ \dfrac{\cos^2 x}{x(\pi - 2x)} + \dfrac{\sin^2 x}{x(\pi - 2x)} \right]\mathrm{d}x \\
    &= \displaystyle\int_{\frac{\pi}{6}}^{\frac{\pi}{4}} \dfrac{\mathrm{d}x}{x(\pi - 2x)} = \dfrac{\ln 2}{\pi}.
    \end{aligned}
    $$

!!! example "例题 6"
    $\displaystyle\int_{0}^{\frac{\pi}{4}} \dfrac{x}{\cos(\frac{\pi}{4}-x)\cos x}\mathrm{d}x$

!!! tip
    请思考一切形如 $\displaystyle\int \dfrac{1}{\sin(x+a)\sin(x+b)}\mathrm{d}x$ （其中 $\sin(a-b)\neq 0$）的积分应该如何计算。

!!! success "解"

    $$
    \begin{aligned}
    I &= \displaystyle\int_{0}^{\frac{\pi}{4}} \dfrac{x}{\cos(\frac{\pi}{4}-x)\cos x}\mathrm{d}x \\
    &\xlongequal{\text{再现}} \dfrac{\pi}{8} \displaystyle\int_{0}^{\frac{\pi}{4}} \dfrac{\mathrm{d}x}{\cos(\frac{\pi}{4}-x)\cos x} \\
    &= \dfrac{\pi}{4\sqrt{2}} \displaystyle\int_{0}^{\frac{\pi}{4}} \dfrac{\sin\left(\frac{\pi}{4}-x+x\right)}{\cos(\frac{\pi}{4}-x)\cos x}\mathrm{d}x \\
    &= \dfrac{\pi}{4\sqrt{2}} \displaystyle\int_{0}^{\frac{\pi}{4}} \left[ \tan\left(\frac{\pi}{4}-x\right) + \tan x \right]\mathrm{d}x \\
    &= \dfrac{\pi}{2\sqrt{2}} \displaystyle\int_{0}^{\frac{\pi}{4}} \tan x \mathrm{d}x = \dfrac{\pi}{4\sqrt{2}} \ln 2.
    \end{aligned}
    $$

!!! example "例题 7"
    $\displaystyle\int_{0}^{\frac{\pi}{2}} \ln \sin x \mathrm{d}x$

!!! success "解"

    $$
    I = \int_{0}^{\frac{\pi}{2}}\ln(\sin x)\mathrm{d}x = \int_{0}^{\frac{\pi}{2}}\ln(\cos x)\mathrm{d}x = \dfrac{1}{2}\int_{0}^{\frac{\pi}{2}}\ln\left(\dfrac{1}{2}\sin(2x)\right)\mathrm{d}x\\
    =-\dfrac{\pi}{4}\ln2 + \dfrac{1}{4}\int_{0}^{\frac{\pi}{2}}\ln(\sin(2x))\mathrm{d}(2x)\\
    =-\dfrac{\pi}{4}\ln2+ \dfrac{1}{4}\int_{0}^{\pi}\ln(\sin x)\mathrm{d} x\\
    =-\dfrac{\pi}{4}\ln2+ \dfrac{1}{2}\int_{0}^{\frac{\pi}{2}}\ln(\sin x)\mathrm{d} x\\
    =-\dfrac{\pi}{4}\ln2+\dfrac{1}{2}I
    $$

    $\therefore I = -\dfrac{\pi}{2}\ln2$



---

## 复杂积分与技巧组合

!!! question "类题 1"
    $\displaystyle\int_{0}^{\frac{\pi}{2}} \dfrac{x}{\tan x}\mathrm{d}x$

!!! success "解"

    $$
    \displaystyle\int_{0}^{\frac{\pi}{2}} \dfrac{x}{\tan x}\mathrm{d}x = \displaystyle\int_{0}^{\frac{\pi}{2}} x \mathrm{d}\ln(\sin x) = -\displaystyle\int_{0}^{\frac{\pi}{2}} \ln(\sin x)\mathrm{d}x = \dfrac{\pi}{2}\ln 2.
    $$

!!! question "类题 2（套娃题）"
    $\displaystyle\int_{-\frac{\pi}{2}}^{\frac{\pi}{2}} \dfrac{\cos x \cdot \ln \cos x}{1+\sin x + \cos x}\mathrm{d}x$

!!! success "解"

    $$
    \begin{aligned}
    I &= \displaystyle\int_{-\frac{\pi}{2}}^{\frac{\pi}{2}} \dfrac{\cos x \cdot \ln(\cos x)}{1+\sin x + \cos x}\mathrm{d}x \\
    &= \displaystyle\int_{0}^{\frac{\pi}{2}} \left[ \dfrac{\cos x \cdot \ln(\cos x)}{1+\sin x + \cos x} + \dfrac{\cos x \cdot \ln(\cos x)}{1-\sin x + \cos x} \right]\mathrm{d}x \\
    &= \displaystyle\int_{0}^{\frac{\pi}{2}} \ln(\cos x)\mathrm{d}x = -\dfrac{\pi}{2}\ln 2.
    \end{aligned}
    $$

!!! example "例题 8"
    计算 $\displaystyle\int_{0}^{1} \dfrac{\ln(1+x)}{1+x^2}\mathrm{d}x$ 和 $\displaystyle\int_{0}^{1} \dfrac{\arctan x}{1+x}\mathrm{d}x$

!!! success "解"
    **第一部分：**

    $$
    \begin{aligned}
    \displaystyle\int_{0}^{1} \dfrac{\ln(1+x)}{1+x^2}\mathrm{d}x &\xrightarrow{x \to \tan x} \displaystyle\int_{0}^{\frac{\pi}{4}} \ln(1+\tan x)\mathrm{d}x \\
    &= \displaystyle\int_{0}^{\frac{\pi}{4}} \ln\left(\sqrt{2}\sin\left(x+\dfrac{\pi}{4}\right)\right)\mathrm{d}x - \displaystyle\int_{0}^{\frac{\pi}{4}} \ln(\cos x)\mathrm{d}x \\
    &\xrightarrow{x+\frac{\pi}{4} \to x, x \to \frac{\pi}{2}-x} \dfrac{\pi}{8}\ln 2 + \displaystyle\int_{\frac{\pi}{4}}^{\frac{\pi}{2}} \ln(\sin x)\mathrm{d}x - \displaystyle\int_{\frac{\pi}{4}}^{\frac{\pi}{2}} \ln(\sin x)\mathrm{d}x \\
    &= \dfrac{\pi}{8}\ln 2.
    \end{aligned}
    $$
    
    **第二部分：**
    利用分部积分：

    $$
    \begin{aligned}
    \displaystyle\int_{0}^{1} \dfrac{\arctan x}{1+x}\mathrm{d}x &= \displaystyle\int_{0}^{1} \arctan x \mathrm{d}\ln(1+x) \\
    &= \dfrac{\pi}{4}\ln 2 - \displaystyle\int_{0}^{1} \dfrac{\ln(1+x)}{1+x^2}\mathrm{d}x = \dfrac{\pi}{8}\ln 2.
    \end{aligned}
    $$

!!! example "例题 9"
    计算 $\displaystyle\int_{0}^{n\pi} x |\sin x| \mathrm{d}x$

!!! success "解"
    $$
    \begin{aligned}
    \displaystyle\int_{0}^{n\pi} x |\sin x| \mathrm{d}x &= \sum_{k=1}^{n} \displaystyle\int_{(k-1)\pi}^{k\pi} x |\sin x| \mathrm{d}x \xrightarrow{x \to x+(k-1)\pi} \sum_{k=1}^{n} \displaystyle\int_{0}^{\pi} [x+(k-1)\pi] \sin x \mathrm{d}x \\
    &= \dfrac{\pi}{2} \sum_{k=1}^{n} \displaystyle\int_{0}^{\pi} \sin x \mathrm{d}x + \pi \sum_{k=1}^{n} (k-1) \displaystyle\int_{0}^{\pi} \sin x \mathrm{d}x = n^2 \pi.
    \end{aligned}
    $$

!!! example "例题 10"
    $\displaystyle\int_{0}^{1} \dfrac{\arcsin\sqrt{x}}{\sqrt{x^2-x+1}}\mathrm{d}x$

!!! success "解"
    $$
    \begin{aligned}
    I &= \displaystyle\int_{0}^{1} \dfrac{\arcsin\sqrt{x}}{\sqrt{1-x+x^2}}\mathrm{d}x = \displaystyle\int_{0}^{\frac{1}{2}} \left( \dfrac{\arcsin\sqrt{x}}{\sqrt{1-x+x^2}} + \dfrac{\arcsin\sqrt{1-x}}{\sqrt{1-x+x^2}} \right)\mathrm{d}x \\
    &= \dfrac{\pi}{2} \displaystyle\int_{0}^{\frac{1}{2}} \dfrac{\mathrm{d}x}{\sqrt{1-x+x^2}} \\
    &= \dfrac{\pi}{2} \displaystyle\int_{0}^{\frac{1}{2}} \dfrac{\mathrm{d}x}{\sqrt{\dfrac{3}{4}+\left(\dfrac{1}{2}-x\right)^2}} \xrightarrow{x \mapsto \frac{1}{2}-\frac{\sqrt{3}}{2}\tan x} \dfrac{\pi}{2} \displaystyle\int_{0}^{\frac{\pi}{6}} \sec x \mathrm{d}x = \dfrac{\pi}{4}\ln 3.
    \end{aligned}
    $$

